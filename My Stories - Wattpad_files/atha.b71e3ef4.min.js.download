var __atha=function(){function p(d,a){window.te.push("event","ad","internal",null,d,a)}function l(d,a,e,i,t){var s=wattpad.utils.getDeviceType(),n=wattpad.utils.generateUUID(),r=_.get(window,"wattpad.testGroups.GDPR_USER",!1),w={id:n,created_at:(new Date).toISOString(),username:wattpad.utils.getCurrentUserAttr("username"),external_id:wattpad.utils.getCurrentUserAttr("externalId"),country_code:wattpad.userCountryCode,app_version:wattpad.revision,platform:"mobile"===s?"mobile-web":"desktop-web",gdpr_is_eu:r,storyid:a,page:d,variation:function(){var d=wattpad.isWpWeb,a=[];return wattpad.testGroups.DELAY_ADS&&a.push("image_moderation=true"),wattpad.testGroups.PREBID_BETA&&a.push("pb_beta=true"),wattpad.testGroups.EXCLUDE_PREBID_PARTNERS&&a.push("exclude_prebid_partners=true"),wattpad.testGroups.USE_KEVEL&&a.push("use_kevel=true"),wattpad.testGroups.USE_33ACROSS&&a.push("use_33across=true"),wattpad.testGroups.USE_IMAGE_MOD&&a.push("use_image_mod=true"),d&&a.push("wpweb=true"),a.join("&")}()};return void 0!==i&&void 0!==t?(w.is_brand_safe=!!i.isBrandSafe,w.is_mature=wattpad.utils.isMatureStory(i),w.brand_safety_source=t.brandSafetySource,w.brand_safety_level=t.brandSafetyLevel):void 0!==i&&void 0===t?(w.is_brand_safe=!!i.isBrandSafe,w.is_mature=wattpad.utils.isMatureStory(i),w.brand_safety_source=i.brandSafetySource,w.brand_safety_level=i.brandSafetyLevel):(w.is_brand_safe=window.ads.is_brand_safe,w.is_mature=window.ads.is_mature,w.brand_safety_source=window.ads.brand_safety_source,w.brand_safety_level=window.ads.brand_safety_level),w.partid=void 0!==e?e:void 0,w}function t(){window.ads=window.ads||{},window.ads[s]=window.ads[s]||{};var d=window.ads[s].page=window.ads.page,a=window.ads[s].story_id=window.ads.story_id,e=window.ads[s].part_id=window.ads.part_id,i=l(d,a,e);return i.ad_partner="ads_eligibility",i.page_view_id=window.ads.page_view_id,i.ccpa_is_ca=window.wattpad.testGroups.CAN_VIEW_CCPA,i}var v="start_time",s="eligibility";return{sendPageView:function(d,a,e,i,t){window.ads=window.ads||{},window.ads.story_id=void 0,window.ads.part_id=void 0,window.ads.is_brand_safe=void 0,window.ads.is_mature=void 0,window.ads.brand_safety_level=void 0,window.ads.brand_safety_source=void 0;var s=l(d,a,e,i,t);return window.ads.page=d,window.ads.story_id=a,window.ads.part_id=e,window.ads.page_view_id=s.id,window.ads.is_brand_safe=s.is_brand_safe,window.ads.is_mature=s.is_mature,window.ads.brand_safety_level=s.brand_safety_level,window.ads.brand_safety_source=s.brand_safety_source,s.user_is_premium=!!wattpad.utils.getCurrentUserAttr("isPremium"),s.story_tags=i&&Array.isArray(i.tags)?i.tags.join(" "):"",s.is_paid_story=i?i.isPaywalled:void 0,s.device_type=wattpad.utils.getDeviceType(),p("page_view",s),s.id},sendRequest:function(d,a,e){window.ads=window.ads||{},window.ads[d]=window.ads[d]||{};var i=window.ads[d].page=window.ads.page,t=window.ads[d].story_id=window.ads.story_id,s=window.ads[d].part_id=window.ads.part_id,n=0;window.ads[d].hasOwnProperty(v)?n=Date.now()-window.ads[d][v]:window.ads[d][v]=Date.now();var r=l(i,t,s);return r.zone_id=e.zoneId?e.zoneId.toString():e.zone?e.zone.toString():"",r.placement=e.htSlotName||e.placement_name,r.page_view_id=window.ads.page_view_id,r.adunit_id=d,r.request_offset=n,r.ad_partner=window.ads[d].ad_partner=a,window.ads[d][a+"_request"]=r.id,p("request",r),r.id},sendBid:function(d,a,e,i){var t=window.ads[d].page,s=window.ads[d].story_id,n=window.ads[d].part_id,r=window.ads[d].ad_partner,w=window.ads[d][r+"_request"],o=l(t,s,n),_=Date.now()-window.ads[d][v];return o.ad_partner=r,o.page_view_id=window.ads.page_view_id,o.adunit_id=d,o.partner_id=a,o.price=e,o.dimensions=i,o.request_id=w,o.request_offset=_,p("bid",o),o.id},sendAuctionResult:function(d,a,e){var i=window.ads[d].page,t=window.ads[d].story_id,s=window.ads[d].part_id,n=window.ads[d].ad_partner,r=Date.now()-window.ads[d][v],w=l(i,t,s);return w.ad_partner=n,w.page_view_id=window.ads.page_view_id,w.request_id=window.ads[d][n+"_request"],w.adunit_id=d,w.num_bids=e?e.length:0,w.price=a?a.bic:0,w.best_bid_id=a?a.id:null,w.request_offset=r,p("auction_result",w),w.id},sendImpression:function(d,a,e,i,t){var s=window.ads[d].page,n=window.ads[d].story_id,r=window.ads[d].part_id,w=window.ads[d].ad_partner,o=window.ads[d][w+"_request"],_=l(s,n,r),u=Date.now()-window.ads[d][v];return _.ad_partner=w,_.page_view_id=window.ads.page_view_id,_.adunit_id=d,_.price=i,_.adunit_format=t,_.request_id=o,_.placement=d.split("-")[0],_.zone_id=a,_.flight_id=e,_.request_offset=u,p("impression",_),_.id},sendSkip:function(d,a,e,i){var t=window.ads.page,s=window.ads.story_id,n=window.ads.part_id,r=l(t,s,n,e,i);return r.adunit_id=d,r.placement=d.split("-")[0],r.placement_type=d.split("-")[0],r.page_view_id=window.ads.page_view_id,r.ad_skip_reason=a,p("ad_skip",r),r.id},sendEligibilityRequestEvent:function(){var d=t();return window.ads[s][v]=Date.now(),d.request_offset=0,d.page=window.ads[s].page,p("request",d),d.id},sendEligibilityLoadEvent:function(d,a){var e=t(),i=0;window.ads[s].hasOwnProperty(v)&&(i=Date.now()-window.ads[s][v]),e.request_offset=i,e.load_status=a,e.is_idfa_allowed=null,e.request_id=d,p("ad_load",e)}}}();"undefined"!=typeof module&&(module.exports=__atha);
//# sourceMappingURL=atha.b71e3ef4.min.js.map
